<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grant Yang Projects</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <style>
        .page-holder {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .project-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            width: 80%;
            margin-bottom: 20px;
        }
        .text-content {
            width: 60%;
        }
        #point-cloud-renderer {
            width: 35%;
            height: 400px; /* Adjust height as needed */
            background-color: #000; /* Add background color to see the container */
        }
    </style>
</head>
<body style="background-color: white">
    <nav>
        <ul>
            <li><a href="https://gyang22.github.io">Grant Yang</a></li>
            <li><a href="https://gyang22.github.io/projects.html">Projects</a></li>
            <li><a href="https://gyang22.github.io/courses.html">Coursework</a></li>
            <li><a href="https://gyang22.github.io/contact.html">Contact</a></li>
            <li><a href="https://github.com/gyang22">GitHub</a></li>
            <li><a href="https://docs.google.com/document/d/1By7KRYZisHQsCamvyu4lspTPTdv91emwgzaNHDLuaQI/edit?usp=drive_link">Resume</a></li>
        </ul>
    </nav>
    <div class="page-holder">
        <section class="projects-section">
            <h1>Projects/Research</h1>
            <div class="project-wrapper">
                <div class="text-content">
                    <h2>Analyzing spiderweb structure, construction, and mechanics</h2>
                    <h3>October 2023 - present</h3>
                    <p>Point cloud generation using laser projection and continuous image slicing, in combination with post-processing image algorithms.</p>
                    <p>Skeletonization process done with line recognition algorithm.</p>
                    <p>Working with <a href="https://math.berkeley.edu/people/faculty/norman-sheu">Norman Sheu</a> and others.</p>
                </div>
                <div id="point-cloud-renderer"></div>
            </div>
            <div class="project-wrapper">
                <div class="text-content">
                    <h2>Placeholder text</h2>
                    <h3>June 2023 - September 2023</h3>
                    <p>place holder paragraph</p>
                </div>
            </div>
        </section>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://threejs.org/examples/js/loaders/PCDLoader.js"></script>
    <script>
      let scene, camera, renderer;

      function init() {
        scene = new THREE.Scene();
        const aspectRatio = document.getElementById('point-cloud-renderer').clientWidth / document.getElementById('point-cloud-renderer').clientHeight;
        camera = new THREE.PerspectiveCamera(75, aspectRatio, 0.1, 10000);

        renderer = new THREE.WebGLRenderer();
        renderer.setSize(document.getElementById('point-cloud-renderer').clientWidth, document.getElementById('point-cloud-renderer').clientHeight);
        document.getElementById('point-cloud-renderer').appendChild(renderer.domElement);

        const loader = new THREE.PCDLoader();
        loader.load('2024-05-25 17-27-41.pcd', function (points) {
          console.log('Point cloud loaded:', points); // Debug line
          scene.add(points);

          // Center of the bounding box
          const centerX = 960;
          const centerY = 540;
          const centerZ = 960;

          // Position the camera to get a good overview of the bounding box
          camera.position.set(centerX, centerY, 3000); // Adjust distance as needed
          camera.lookAt(new THREE.Vector3(centerX, centerY, centerZ));

          animate();
        }, undefined, function (error) {
          console.error('Error loading PCD file:', error); // Debug line
        });
      }

      function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
      }

      init();

      window.addEventListener('resize', function () {
        const aspectRatio = document.getElementById('point-cloud-renderer').clientWidth / document.getElementById('point-cloud-renderer').clientHeight;
        camera.aspect = aspectRatio;
        camera.updateProjectionMatrix();
        renderer.setSize(document.getElementById('point-cloud-renderer').clientWidth, document.getElementById('point-cloud-renderer').clientHeight);
      });
    </script>
</body>
</html>
